<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AvaliaÃ§Ã£o - Medvitta</title>

<!-- Fonte -->
<link href="https://fonts.googleapis.com/css2?family=Figtree:wght@300;500;700;800&display=swap" rel="stylesheet">

<!-- Material Icons -->
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:FILL@0..1" rel="stylesheet" />


<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<style>

*{
  font-family: "Figtree", sans-serif;
  box-sizing: border-box;
  margin:0;
  padding:0;
}

body{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:20px;
  background: linear-gradient(135deg, #eef2ff 0%, #f8fafc 50%, #e0f2fe 100%);
}

.logo{
  min-width:100px;
  max-width:200px;
  width:100%;
  margin-bottom:15px;
}

.review-container{
  width:100%;
  max-width:520px;
  background:rgba(255,255,255,0.65);
  backdrop-filter:blur(18px);
  border-radius:24px;
  padding:40px 32px;
  box-shadow:0 15px 40px rgba(0,0,0,0.06), 0 5px 15px rgba(0,0,0,0.03);
}

.review-text-stars{
  display:flex;
  flex-direction:column;
  align-items:center;
}

.review-main-text{
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}

.header{
  background: linear-gradient(to right, #042462 13%, #0ed0e0 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  font-size:20px;
  font-weight:700;
  margin-bottom:8px;
}

#subtitle{
  letter-spacing:2px;
  font-size:13px;
  color:#6b7280;
  font-weight:500;
}

.response{
  font-size:13px;
  margin-top:10px;
  width:80%;
  text-align:center;
}

.review-stars{
  display:flex;
  gap:12px;
  margin-top:20px;
  margin-bottom:25px;
}

.star{
  font-size:42px;
  cursor:pointer;
  color:#d1d5db;
  transition:all 0.25s ease;
}

.star:hover{
  transform:scale(1.25);
}

.star.active{
  color:#facc15;
  font-variation-settings:'FILL' 1;
  transform:scale(1.15);
}

/* FORM */

#form-feedback{
  display:none;
  flex-direction:column;
  width:100%;
  max-width:480px;
  background:#ffffff;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.05);
  padding:32px;
}

h2{
  color:#1f2937;
  font-size:20px;
  margin-bottom:8px;
}

.form-group{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.form-group label{
  font-size:13px;
  font-weight:600;
  color:#374151;
}

input, textarea{
  width:100%;
  font-size:14px;
  border-radius:12px;
  border:1px solid #e5e7eb;
  padding:14px 16px;
  background-color:#ffffff;
  transition:all 0.25s ease;
}

input:focus, textarea:focus{
  outline:none;
  border:1px solid rgba(14,208,224,1);
  box-shadow:0 0 0 3px rgba(14,208,224,0.15);
}

.step{
  display:none;
  flex-direction:column;
  gap:18px;
}

.step.active{
  display:flex;
}

button{
  margin-top:8px;
  color:#ffffff;
  background: linear-gradient(180deg, rgba(14,208,224,1) 0%, rgba(4,36,98,1) 100%);
  font-size:14px;
  font-weight:600;
  padding:14px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  transition:all 0.25s ease;
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 18px rgba(4,36,98,0.15);
}

#back-button{
  background:#e5e7eb;
  color:#374151;
}

#warning{
  display:none;
  margin-top:10px;
  font-size:13px;
  font-weight:500;
  color:#dc2626;
  background-color:#fef2f2;
  padding:10px 14px;
  border-radius:8px;
  border:1px solid #fecaca;
  text-align:center;
}

#warning.show{
  display:block;
  animation:shake 0.3s ease;
}

@keyframes shake{
  0%{transform:translateX(0);}
  20%{transform:translateX(-4px);}
  40%{transform:translateX(4px);}
  60%{transform:translateX(-4px);}
  80%{transform:translateX(4px);}
  100%{transform:translateX(0);}
}

</style>
</head>
<body>

<div class="review-container">

<div class="review-text-stars">
<img src="https://c5gwmsmjx1.execute-api.us-east-1.amazonaws.com/prod/empresa/logo/159944/ON__1_.png" class="logo">

<div class="review-main-text">
<p id="subtitle">Conta para gente</p>
<h2 class="header">Como foi sua experiÃªncia?</h2>
<p class="response" id="positive" style="display:none">ðŸŽ‰ Obrigado pela sua avaliaÃ§Ã£o! Redirecionando...</p>
<p class="response" id="negative" style="display:none">ðŸ˜” Sentimos muito pela experiÃªncia. Abrindo formulÃ¡rio...</p>
</div>

<div class="review-stars">
<span class="material-symbols-outlined star" data-value="1">kid_star</span>
<span class="material-symbols-outlined star" data-value="2">kid_star</span>
<span class="material-symbols-outlined star" data-value="3">kid_star</span>
<span class="material-symbols-outlined star" data-value="4">kid_star</span>
<span class="material-symbols-outlined star" data-value="5">kid_star</span>
</div>
</div>

<form id="form-feedback">

<div class="step step-1 active">
<h2>InformaÃ§Ãµes Iniciais - Suporte Medvitta</h2>

<div class="form-group">
<label>Seu nome</label>
<input type="text" id="name" required>
</div>

<div class="form-group">
<label>Nome do atendente (Opcional)</label>
<input type="text" id="atendente">
</div>

<div class="form-group">
<label>Descreva sua reclamaÃ§Ã£o</label>
<textarea id="complaint" rows="4" required></textarea>
</div>

<button type="button" id="next-button">PrÃ³ximo</button>
</div>

<div class="step step-2">

<div class="form-group">
<label>Seu e-mail</label>
<input type="email" id="email" required>
</div>

<div class="form-group">
<label>Seu telefone</label>
<input type="tel" id="phone" required placeholder="(00) 00000-0000">
</div>

<div class="form-group">
<label>Data da compra</label>
<input type="date" id="purchaseDate">
</div>

<div class="form-group">
<label>NÃºmero do ticket (Opcional)</label>
<input type="text" id="ticket" maxlength="8">
</div>

<div class="form-group">
<label>Produto</label>
<input type="text" id="product">
</div>

<button type="button" id="back-button">Voltar</button>
<button type="submit">Enviar</button>
</div>

<span id="warning">*Preencha os campos obrigatÃ³rios antes de continuar.</span>

</form>
</div>

<script>

// EMAILJS
emailjs.init("1zaYp72S_TuPS-vQw");

// ===== STARS =====
const stars = document.querySelectorAll('.star');
const form = document.getElementById("form-feedback");
let isClicked = false;

stars.forEach(star=>{
star.addEventListener("click", ()=>{
if(isClicked) return;
isClicked = true;

const value = Number(star.dataset.value);

stars.forEach(s=>{
if(Number(s.dataset.value)<=value){
s.classList.add("active");
}
});

const subtitle = document.getElementById("subtitle");
const header = document.querySelector(".header");

if(value>=4){
document.getElementById("positive").style.display="block";
subtitle.style.display="none";
header.style.display="none";

setTimeout(()=>{
window.location.href="https://g.page/r/Cb17yvV9tFt5EBM/review";
},1000);

}else{
document.getElementById("negative").style.display="block";
subtitle.style.display="none";
header.style.display="none";

setTimeout(()=>{
document.querySelector(".review-stars").style.display="none";
document.getElementById("negative").style.display="none";
form.style.display="flex";
},3000);
}
});
});

// ===== STEP FORM =====
const step1=document.querySelector(".step-1");
const step2=document.querySelector(".step-2");

document.getElementById("next-button").addEventListener("click",()=>{
const name=document.getElementById("name");
const complaint=document.getElementById("complaint");

if(!name.value || !complaint.value){
const warning=document.getElementById("warning");
warning.classList.add("show");
setTimeout(()=>warning.classList.remove("show"),2000);
return;
}

step1.classList.remove("active");
step2.classList.add("active");
});

document.getElementById("back-button").addEventListener("click",()=>{
step2.classList.remove("active");
step1.classList.add("active");
});

// ===== TELEFONE MASK =====
document.getElementById("phone").addEventListener("input",function(e){
let v=e.target.value.replace(/\D/g,"").slice(0,11);
if(v.length<=10){
v=v.replace(/(\d{2})(\d)/,"($1) $2");
v=v.replace(/(\d{4})(\d)/,"$1-$2");
}else{
v=v.replace(/(\d{2})(\d)/,"($1) $2");
v=v.replace(/(\d{5})(\d)/,"$1-$2");
}
e.target.value=v;
});

// ===== SUBMIT =====
form.addEventListener("submit",function(e){
e.preventDefault();

const formData={
name:name.value,
atendente:atendente.value,
complaint:complaint.value,
ticket:ticket.value,
email:email.value,
phone:phone.value,
product:product.value,
purchaseDate:purchaseDate.value,
year:new Date().getFullYear()
};

emailjs.send("service_bfhsznd","template_olgznss",formData)
.then(()=>{
document.querySelector(".review-container").innerHTML="<p class='response'>âœ… FormulÃ¡rio enviado com sucesso!</p>";
})
.catch(()=>{
alert("Erro ao enviar. Tente novamente.");
});
});

</script>

</body>
</html>
